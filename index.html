<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <title>AR Galaxy</title>
    <script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1c2407b26c61958baa93967b5412487cd94b290b/dist/aframe-master.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    <link rel="stylesheet" href="./style.css">
</head>

<body style="margin : 0px; overflow: hidden;">
  <div class="arjs-loader">
    <div>กรุณารอโหลดสักครู่...</div>
  </div>

  <a-scene
    vr-mode-ui="enabled: false;"
    renderer="logarithmicDepthBuffer: true;"
    embedded
    arjs="trackingMethod: best; sourceType: webcam;debugUIEnabled: false;"
  >

    <a-assets>

        <script>
            AFRAME.registerComponent('vidhandler', {
            init: function () {
            this.toggle = false;
            document.querySelectorAll(".video").forEach(el=> el.pause()); //reference to the video
            },
            tick: function () {
              if (
                document.querySelector("#nft-dark").object3D.visible == true
              ) {
                if (!this.toggle) {
                  this.toggle = true;
                  document.querySelector("#dark").play();
                }
              } else if (
                document.querySelector("#nft-greek").object3D.visible == true
              ) {
                if (!this.toggle) {
                  this.toggle = true;
                  document.querySelector("#greek").play();
                }
              } else if (
                document.querySelector("#nft-ed").object3D.visible == true
              ) {
                if (!this.toggle) {
                  this.toggle = true;
                  document.querySelector("#ed").play();
                }
              } else if (
                document.querySelector("#nft-sgx").object3D.visible == true
              ) {
                if (!this.toggle) {
                  this.toggle = true;
                  document.querySelector("#sgx").play();
                }
              } else if (
                document.querySelector("#nft-mfe").object3D.visible == true
              ) {
                if (!this.toggle) {
                  this.toggle = true;
                  document.querySelector("#mfe").play();
                }
              } else {
                this.toggle = false;
                document
                  .querySelectorAll(".video")
                  .forEach((el) => el.pause());
                }
            },
            });
        </script>
        <video class="video" id="dark" autoplay loop="true" src="https://cdn.glitch.com/1d46662e-f6e0-42e1-aa91-0a01a20b12d3%2Fdm.mp4?v=1596220725802"></video>
        <video class="video" id="ed" autoplay loop="true" src="https://cdn.glitch.com/1d46662e-f6e0-42e1-aa91-0a01a20b12d3%2Fed.mp4?v=1596220940369"></video>
        <video class="video" id="greek" autoplay loop="true" src="https://cdn.glitch.com/1d46662e-f6e0-42e1-aa91-0a01a20b12d3%2Fgreek.mp4?v=1596220647203"></video>
        <video class="video" id="mfe" autoplay loop="true" src="https://cdn.glitch.com/1d46662e-f6e0-42e1-aa91-0a01a20b12d3%2Fearth.mp4?v=1596220633568"></video>
        <video class="video" id="sgx" autoplay loop="true" src="https://cdn.glitch.com/1d46662e-f6e0-42e1-aa91-0a01a20b12d3%2FmilkyWay.mp4?v=1596220771448"></video>
    </a-assets>

        <a-nft
        type="nft"
        url="./marks/dark"
        smooth="true"
        smoothCount="10"
        smoothTolerance=".01"
        smoothThreshold="5"
        vidhandler
        id="nft-dark"
        >
            <a-video src="#dark" scale="250 150 0" position="40 0 -80"rotation="-90 0 0"></a-video>
        </a-nft>
        
        
        <a-nft
        type="nft"
        url="./marks/sgx"
        smooth="true"
        smoothCount="10"
        smoothTolerance=".01"
        smoothThreshold="5"
        vidhandler
        id="nft-sgx"
        >
            <a-video src="#sgx" scale="400 300 0" position="40 0 -80"rotation="-90 0 0"></a-video>
        </a-nft>
        
        <a-nft
        type="nft"
        url="./marks/mfe"
        smooth="true"
        smoothCount="10"
        smoothTolerance=".01"
        smoothThreshold="5"
        vidhandler
        id="nft-mfe"
        >
            <a-video src="#mfe" scale="400 300 0" position="40 0 -80"rotation="-90 0 0"></a-video>
        </a-nft>

        
        <a-nft
        type="nft"
        url="./marks/greek"
        smooth="true"
        smoothCount="10"
        smoothTolerance=".01"
        smoothThreshold="5"
        vidhandler
        id="nft-greek"
        >
            <a-video src="#greek" scale="100 50 0" position="40 0 -80"rotation="-90 0 0"></a-video>
        </a-nft>
            
        <a-nft
        type="nft"
        url="./marks/ed"
        smooth="true"
        smoothCount="10"
        smoothTolerance=".01"
        smoothThreshold="5"
        vidhandler
        id="nft-ed"
        >
            <a-video src="#ed" scale="200 150 0" position="60 0 -80"rotation="-90 0 0"></a-video>
        </a-nft>

        <a-entity camera></a-entity>
    </a-scene>
</body>
    
</body>
</html>